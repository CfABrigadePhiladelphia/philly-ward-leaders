---
layout: default
scripts:
  - https://cdnjs.cloudflare.com/ajax/libs/snap.svg/0.4.0/snap.svg-min.js
  - scripts/baseball-card.js
---
{% assign leaders = site.leaders | where: 'party', 'D' %}
{% assign stats = site.data.stats %}
{% assign committee_people = site.data.committee_people %}

<div class="row">
  <div class="medium-12 columns">
    <ul class="small-block-grid-1 medium-block-grid-3 large-block-grid-3" id="leaders">
      {% for leader in leaders %}

        {% assign party = site.pwl.parties[leader.party] %}
        {% assign stat = stats | where: 'ward', leader.ward | where: 'party', party.name | first %}

        {% assign turnout_percent_party = stat.turnout_party | times: 100 | divided_by: stat.registered_party | round %}

        {% assign committee_count = committee_people | where: 'ward', leader.ward | where: 'party', party.name | size %}
        {% assign vacancies = leader.divisions | times: 2 | minus: committee_count %}

        <li class="flip-container"
          data-ward="{{ leader.ward }}"
          data-name="{{ leader.name }}"
          data-photo="{{ leader.photo }}"
          data-photo-offset="{{ leader.photo_offset }}">
          <div class="flipper">
            <svg class="front"></svg>
            <svg class="back"></svg>
            <svg class="contents">
              <foreignObject width="100%" height="100%">
                <body>
                  <div class="stats">
                    <h3>{{ leader.name }} <span class="ward-ordinal">{{ leader.ward }} Ward</span></h3>
                    <dl>
                      <dt>Voters ({{ leader.party }})</dt>
                      <dd>{{ stat.registered_party }}</dd>

                      <dt>Turnout ({{ leader.party }})</dt>
                      <dd>{{ turnout_percent_party }}%</dd>

                      <dt>Vacancies</dt>
                      <dd>{{ vacancies }}</dd>
                    </dl>
                    <a href="{{ leader.url }}" class="button expand">Details</a>
                  </div>
                </body>
              </foreignObject>
            </svg>
          </div>
        </li>
      {% endfor %}
    </ul>
  </div>
</div>
